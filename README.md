# WebbyLab

Приложение базируется на архитектуре MVC;

##Controllers

###Main
*actionIndex()* метод по умолчанию, генерирует вид с таблцицой фильмов.
*actionImport()* метод для импорта фильмов с базы данных;
###Error
*actionIndex()* генерирует страницу обшибки. Текст ошибки передается с переменной $_GET
###Film
*acrionIndex()* получает информацию о фильме и генерирует страничку. Также отправляет ссылку на обратный путь
###Delete
*actionIndex()* удаляет запись с базы по id

##Models
###Delete
*delete()* обращается к класу DB для удаления записи.
###Film
*getFilm()* возвращает информацию о фильме.
###Main
*getDataAll()* извлекает все записи с базы.
*import()* выполняет импорт фильмов с файла. Проверяет файл, парсит его и добавляет в базу.
####Classes
####DB
Публичные свойства являются ключами к базе данных.
Конструктор создает подключение к базе и устанавливает кодировку.
*getAll()* по умолчанию возвращает все записи с таблицы, но можно указать поля, которые нада извлечь.
*get()* возвращает одну запись по id.
*add()*  добавляет запись в базу данных. Принимает обьект FIlm. 
*delete()* удаляет запись по id
####File
checkExtention() проверяет расширение файла, а также его наличие.
parseText() парсит текст и создает список обьектов Film.
####Film
Конструктор принимает массив в виде ['Title']=>$title, ['Release Year']=>$year, ['Format']=>$format, ['Stars']=>stars.
*pasreFilm* Парсит текст и создает масив для конструктора.
####Warnings
Хранит и возвращает предупреждения.
###Import
Для импорта поддерживаются только *.txt файлы. 
Фильмы разделяются между собой двойным переносом строки (\n\n). Один фильм должен иметь по одному экземпляру заголовка(Title,Release Year, Format, Stars).
Заголовки разделяются переносом строки. Заголовок от значения - ": ".
